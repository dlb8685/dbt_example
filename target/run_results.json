{"results": [{"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('fact_daily_performance'), column_name='spend') }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "not_null_fact_daily_performance_spend"], "unique_id": "test.civis_platform.not_null_fact_daily_performance_spend", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/not_null_fact_daily_performance_spend.sql", "original_file_path": "models/main/schema.yml", "name": "not_null_fact_daily_performance_spend", "resource_type": "test", "alias": "not_null_fact_daily_performance_spend", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["fact_daily_performance"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.fact_daily_performance"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/not_null_fact_daily_performance_spend.sql", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"fact_daily_performance\"\nwhere spend is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"fact_daily_performance\"\nwhere spend is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"fact_daily_performance\"\nwhere spend is null\n", "column_name": "spend", "test_metadata": {"namespace": null, "name": "not_null", "kwargs": {"column_name": "spend"}}}, "error": null, "status": 0.0, "execution_time": 0.03200793266296387, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.704364Z", "completed_at": "2020-03-26T17:41:03.720328Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.720944Z", "completed_at": "2020-03-26T17:41:03.735047Z"}], "fail": null, "warn": null, "skip": false}, {"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('my_first_dbt_model'), column_name='id') }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "not_null_my_first_dbt_model_id"], "unique_id": "test.civis_platform.not_null_my_first_dbt_model_id", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/not_null_my_first_dbt_model_id.sql", "original_file_path": "models/example/schema.yml", "name": "not_null_my_first_dbt_model_id", "resource_type": "test", "alias": "not_null_my_first_dbt_model_id", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["my_first_dbt_model"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.my_first_dbt_model"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/not_null_my_first_dbt_model_id.sql", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_first_dbt_model\"\nwhere id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_first_dbt_model\"\nwhere id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_first_dbt_model\"\nwhere id is null\n", "column_name": "id", "test_metadata": {"namespace": null, "name": "not_null", "kwargs": {"column_name": "id"}}}, "error": null, "status": 1.0, "execution_time": 0.016522884368896484, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.737056Z", "completed_at": "2020-03-26T17:41:03.749518Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.750102Z", "completed_at": "2020-03-26T17:41:03.752195Z"}], "fail": true, "warn": null, "skip": false}, {"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('my_second_dbt_model'), column_name='id') }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "not_null_my_second_dbt_model_id"], "unique_id": "test.civis_platform.not_null_my_second_dbt_model_id", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/not_null_my_second_dbt_model_id.sql", "original_file_path": "models/example/schema.yml", "name": "not_null_my_second_dbt_model_id", "resource_type": "test", "alias": "not_null_my_second_dbt_model_id", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["my_second_dbt_model"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.my_second_dbt_model"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/not_null_my_second_dbt_model_id.sql", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_second_dbt_model\"\nwhere id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_second_dbt_model\"\nwhere id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"dbryan\".\"public\".\"my_second_dbt_model\"\nwhere id is null\n", "column_name": "id", "test_metadata": {"namespace": null, "name": "not_null", "kwargs": {"column_name": "id"}}}, "error": null, "status": 0.0, "execution_time": 0.020787954330444336, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.754337Z", "completed_at": "2020-03-26T17:41:03.767705Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.769441Z", "completed_at": "2020-03-26T17:41:03.773405Z"}], "fail": null, "warn": null, "skip": false}, {"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_relationships(model=ref('fact_daily_performance'), column_name='date', field='date', to=ref('dim_date')) }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "relationships_fact_daily_performance_date__date__ref_dim_date_"], "unique_id": "test.civis_platform.relationships_fact_daily_performance_date__date__ref_dim_date_", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/relationships_fact_daily_performance_date__date__ref_dim_date_.sql", "original_file_path": "models/main/schema.yml", "name": "relationships_fact_daily_performance_date__date__ref_dim_date_", "resource_type": "test", "alias": "relationships_fact_daily_performance_date__date__ref_dim_date_", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["fact_daily_performance"], ["dim_date"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.fact_daily_performance", "seed.civis_platform.dim_date"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/relationships_fact_daily_performance_date__date__ref_dim_date_.sql", "compiled": true, "compiled_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select date as id from \"dbryan\".\"public\".\"fact_daily_performance\"\n) as child\nleft join (\n    select date as id from \"dbryan\".\"public\".\"dim_date\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select date as id from \"dbryan\".\"public\".\"fact_daily_performance\"\n) as child\nleft join (\n    select date as id from \"dbryan\".\"public\".\"dim_date\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "wrapped_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select date as id from \"dbryan\".\"public\".\"fact_daily_performance\"\n) as child\nleft join (\n    select date as id from \"dbryan\".\"public\".\"dim_date\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n", "column_name": "date", "test_metadata": {"namespace": null, "name": "relationships", "kwargs": {"to": "ref('dim_date')", "field": "date", "column_name": "date"}}}, "error": null, "status": 0.0, "execution_time": 0.01936173439025879, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.776871Z", "completed_at": "2020-03-26T17:41:03.791383Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.791748Z", "completed_at": "2020-03-26T17:41:03.793992Z"}], "fail": null, "warn": null, "skip": false}, {"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('my_first_dbt_model'), column_name='id') }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "unique_my_first_dbt_model_id"], "unique_id": "test.civis_platform.unique_my_first_dbt_model_id", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/unique_my_first_dbt_model_id.sql", "original_file_path": "models/example/schema.yml", "name": "unique_my_first_dbt_model_id", "resource_type": "test", "alias": "unique_my_first_dbt_model_id", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["my_first_dbt_model"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.my_first_dbt_model"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/unique_my_first_dbt_model_id.sql", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_first_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_first_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_first_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n", "column_name": "id", "test_metadata": {"namespace": null, "name": "unique", "kwargs": {"column_name": "id"}}}, "error": null, "status": 0.0, "execution_time": 0.021488189697265625, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.798637Z", "completed_at": "2020-03-26T17:41:03.813848Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.814542Z", "completed_at": "2020-03-26T17:41:03.817476Z"}], "fail": null, "warn": null, "skip": false}, {"node": {"raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('my_second_dbt_model'), column_name='id') }}", "database": "dbryan", "schema": "public", "fqn": ["civis_platform", "schema_test", "unique_my_second_dbt_model_id"], "unique_id": "test.civis_platform.unique_my_second_dbt_model_id", "package_name": "civis_platform", "root_path": "/Users/dbryan/civisanalytics/docker-scratch/dbt_project", "path": "schema_test/unique_my_second_dbt_model_id.sql", "original_file_path": "models/example/schema.yml", "name": "unique_my_second_dbt_model_id", "resource_type": "test", "alias": "unique_my_second_dbt_model_id", "config": {"enabled": true, "materialized": "view", "persist_docs": {}, "post-hook": [{"sql": "update last_run set last_run_finish = current_timestamp;", "transaction": true, "index": null}], "pre-hook": [{"sql": "drop table if exists last_run; select current_timestamp as last_run_start, null as last_run_finish into last_run;", "transaction": true, "index": null}], "vars": {}, "quoting": {}, "column_types": {}, "tags": [], "severity": "ERROR"}, "tags": ["schema"], "refs": [["my_second_dbt_model"]], "sources": [], "depends_on": {"nodes": ["model.civis_platform.my_second_dbt_model"], "macros": []}, "docrefs": [], "description": "", "columns": {}, "patch_path": null, "build_path": "target/compiled/civis_platform/schema_test/unique_my_second_dbt_model_id.sql", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_second_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_second_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        id\n\n    from \"dbryan\".\"public\".\"my_second_dbt_model\"\n    where id is not null\n    group by id\n    having count(*) > 1\n\n) validation_errors\n", "column_name": "id", "test_metadata": {"namespace": null, "name": "unique", "kwargs": {"column_name": "id"}}}, "error": null, "status": 0.0, "execution_time": 0.01910090446472168, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-03-26T17:41:03.821719Z", "completed_at": "2020-03-26T17:41:03.835873Z"}, {"name": "execute", "started_at": "2020-03-26T17:41:03.836632Z", "completed_at": "2020-03-26T17:41:03.838635Z"}], "fail": null, "warn": null, "skip": false}], "generated_at": "2020-03-26T17:41:03.920671Z", "elapsed_time": 0.42499613761901855}